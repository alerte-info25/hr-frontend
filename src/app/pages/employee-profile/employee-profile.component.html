<div class="profile-container">
  <div class="profile-wrapper">
    <!-- Header avec photo et info principale -->
    <div class="profile-header-card">
      <div class="cover-gradient"></div>
      <div class="profile-header-content">
        <div class="profile-photo-wrapper">
          <div class="profile-photo">
            <img [src]="user?.employe?.photo_url || 'assets/images/avatar/my-avatar.png'"
                 alt="Photo de profil" />
          </div>
          <button class="edit-photo-btn" (click)="editProfile()" title="Changer la photo">
            <mat-icon>photo_camera</mat-icon>
          </button>
        </div>

        <div class="profile-main-info">
          <h1 class="profile-name">
            {{ user?.employe?.prenom }} {{ user?.employe?.nom }}
          </h1>
          <p class="profile-role">
            <mat-icon>work</mat-icon>
            {{ user?.employe?.fonction?.nom || 'Employé' }}
          </p>
          <p class="profile-matricule" *ngIf="user?.employe?.matricule">
            <mat-icon>badge</mat-icon>
            {{ user?.employe?.matricule }}
          </p>
          <div class="profile-badges">
            <span class="badge-role">
              <mat-icon>shield</mat-icon>
              {{ user?.role?.libelle }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Informations personnelles -->
    <div class="info-section">
      <div class="section-header">
        <mat-icon>person</mat-icon>
        <h2>Informations personnelles</h2>
      </div>

      <div class="info-grid">
        <div class="info-card">
          <div class="info-icon email">
            <mat-icon>email</mat-icon>
          </div>
          <div class="info-content">
            <span class="info-label">Email</span>
            <span class="info-value">{{ user?.employe?.emailPersonnel }}</span>
          </div>
        </div>

        <div class="info-card">
          <div class="info-icon phone">
            <mat-icon>phone</mat-icon>
          </div>
          <div class="info-content">
            <span class="info-label">Téléphone</span>
            <span class="info-value">{{ user?.employe?.telephone || '-' }}</span>
          </div>
        </div>

        <div class="info-card">
          <div class="info-icon phone">
            <mat-icon>admin_panel_settings</mat-icon>
          </div>
          <div class="info-content">
            <span class="info-label">Rôle</span>
            <span class="info-value">{{ user?.role?.libelle || '-' }}</span>
          </div>
        </div>

        <div class="info-card wide">
          <div class="info-icon address">
            <mat-icon>location_on</mat-icon>
          </div>
          <div class="info-content">
            <span class="info-label">Adresse</span>
            <span class="info-value">{{ user?.employe?.adresse || 'Non renseignée' }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Informations contractuelles -->
    <div class="info-section" *ngIf="user?.employe?.contrat">
      <div class="section-header">
        <mat-icon>description</mat-icon>
        <h2>Informations contractuelles</h2>
      </div>

      <div class="contract-grid">
        <div class="contract-card">
          <div class="contract-icon type">
            <mat-icon>assignment</mat-icon>
          </div>
          <div class="contract-content">
            <span class="contract-label">Type de contrat</span>
            <span class="contract-value">{{ user?.employe?.contrat?.type?.nom }}</span>
          </div>
        </div>

        <!-- <div class="contract-card">
          <div class="contract-icon salary">
            <mat-icon>payments</mat-icon>
          </div>
          <div class="contract-content">
            <span class="contract-label">Salaire</span>
            <span class="contract-value">
              {{ user?.employe?.contrat?.salaire | currency: 'XOF':'symbol':'1.0-0' }}
            </span>
          </div>
        </div> -->

        <div class="contract-card">
          <div class="contract-icon date">
            <mat-icon>event</mat-icon>
          </div>
          <div class="contract-content">
            <span class="contract-label">Date de début</span>
            <span class="contract-value">
              {{ user?.employe?.contrat?.debut | date: 'dd/MM/yyyy' }}
            </span>
          </div>
        </div>

        <div class="contract-card">
          <div class="contract-icon date">
            <mat-icon>event_available</mat-icon>
          </div>
          <div class="contract-content">
            <span class="contract-label">Date de fin</span>
            <span class="contract-value">
              {{ user?.employe?.contrat?.fin | date: 'dd/MM/yyyy' }}
            </span>
          </div>
        </div>

        <div *ngIf="user?.employe?.contrat?.fin !== null" class="contract-card highlight" [ngClass]="{ 'warning': daysRemaining <= 30, 'danger': daysRemaining <= 10 }">
          <div class="contract-icon remaining">
            <mat-icon>schedule</mat-icon>
          </div>
          <div class="contract-content">
            <span class="contract-label">Jours restants</span>
            <span class="contract-value-large">
              {{ daysRemaining }}
              <span class="unit">jour{{ daysRemaining > 1 ? 's' : '' }}</span>
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="actions-section">
      <button mat-raised-button class="action-btn primary" (click)="editProfile()">
        <mat-icon>photo_camera</mat-icon>
        <span>Changer ma photo</span>
      </button>

      <button mat-raised-button class="action-btn secondary" (click)="changePassword()">
        <mat-icon>lock</mat-icon>
        <span>Changer le mot de passe</span>
      </button>

      <button mat-raised-button class="action-btn info" (click)="editInfos()">
        <mat-icon>edit</mat-icon>
        <span>Modifier mes infos</span>
      </button>
    </div>
  </div>
</div>
