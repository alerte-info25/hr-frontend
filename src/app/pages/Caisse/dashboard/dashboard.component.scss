// ============================================================================
// MAIN CONTENT - Dashboard Comptable
// Transformé en SCSS structuré
// ============================================================================

// ----------------------------------------------------------------------------
// Variables et couleurs
// ----------------------------------------------------------------------------
$primary-blue: #1e3a5f;
$secondary-blue: #2b4c7c;
$accent-blue: #3a6ea5;
$primary-yellow: #f4b400;
$secondary-yellow: #ffc107;
$dark: #1e2a3a;
$light: #f8f9fc;
$gray: #6c757d;
$success: #28a745;
$danger: #dc3545;
$warning: #ffc107;
$info: #17a2b8;

$border-radius-sm: 8px;
$border-radius-md: 12px;
$border-radius-lg: 20px;
$border-radius-xl: 30px;

$box-shadow-sm: 0 2px 10px rgba(0, 0, 0, 0.02);
$box-shadow-md: 0 5px 20px rgba(30, 58, 95, 0.1);
$box-shadow-lg: 0 8px 25px rgba(30, 58, 95, 0.15);
$box-shadow-hover: 0 4px 8px rgba(30, 58, 95, 0.2);

$transition-base: all 0.3s ease;
$transition-fast: all 0.2s ease;

// ----------------------------------------------------------------------------
// Mixins
// ----------------------------------------------------------------------------
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin gradient-primary {
  background: linear-gradient(90deg, $primary-blue, $accent-blue);
}

@mixin gradient-success {
  background: linear-gradient(90deg, $success, #34ce57);
}

@mixin gradient-warning {
  background: linear-gradient(90deg, $warning, #ffcd39);
}

@mixin gradient-info {
  background: linear-gradient(90deg, $info, #31d2f2);
}

@mixin hover-lift {
  transition: $transition-base;

  &:hover {
    transform: translateY(-3px);
    box-shadow: $box-shadow-md;
  }
}

@mixin card-base {
  border: none;
  border-radius: $border-radius-md;
  box-shadow: $box-shadow-sm;
  border: 1px solid rgba(0, 0, 0, 0.02);
  transition: $transition-base;
}

@mixin respond-to($breakpoint) {
  @if $breakpoint == tablet {
    @media (max-width: 992px) {
      @content;
    }
  } @else if $breakpoint == mobile {
    @media (max-width: 768px) {
      @content;
    }
  } @else if $breakpoint == small {
    @media (max-width: 576px) {
      @content;
    }
  } @else if $breakpoint == print {
    @media print {
      @content;
    }
  }
}

// ----------------------------------------------------------------------------
// Keyframes Animations
// ----------------------------------------------------------------------------
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// ============================================================================
// Styles Principaux
// ============================================================================

#page-content-wrapper {
  flex: 1;
  transition: $transition-base;
  background-color: $light;
}

.container-fluid {
  &.px-4 {
    padding-top: 1rem;
    padding-bottom: 2rem;

    @include respond-to(small) {
      padding-left: 1rem !important;
      padding-right: 1rem !important;
    }

    @include respond-to(mobile) {
      padding-left: 1.5rem !important;
      padding-right: 1.5rem !important;
    }
  }
}

// ----------------------------------------------------------------------------
// En-tête du Dashboard
// ----------------------------------------------------------------------------
.dashboard-title {
  color: $dark;
  font-weight: 600;
  font-size: 1.75rem;
  margin-bottom: 0.25rem;

  i {
    font-size: 1.5rem;
  }

  @include respond-to(tablet) {
    font-size: 1.5rem;
  }

  @include respond-to(small) {
    font-size: 1.25rem;
  }
}

// ----------------------------------------------------------------------------
// Filtres rapides
// ----------------------------------------------------------------------------
.quick-filters {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;

  @include respond-to(tablet) {
    justify-content: flex-start;
    margin-top: 1rem;
  }
}

.filter-btn {
  background: white;
  border: 1px solid #dee2e6;
  padding: 8px 16px;
  border-radius: $border-radius-lg;
  color: $gray;
  font-size: 0.9rem;
  transition: $transition-base;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;

  &:hover {
    background: $primary-blue;
    color: white;
    border-color: $primary-blue;
    transform: translateY(-2px);
    box-shadow: $box-shadow-hover;
  }

  &.active {
    background: $primary-blue;
    color: white;
    border-color: $primary-blue;
    font-weight: 500;
  }

  i {
    font-size: 0.85rem;
  }

  @include respond-to(small) {
    padding: 6px 12px;
    font-size: 0.85rem;
  }
}

// ----------------------------------------------------------------------------
// Cartes de statistiques
// ----------------------------------------------------------------------------
.stats-card {
  @include card-base;
  overflow: hidden;
  height: 100%;

  &:hover {
    transform: translateY(-5px);
    box-shadow: $box-shadow-lg;
    border-color: rgba($primary-blue, 0.1);

    .stats-icon {
      transform: scale(1.1);
      color: rgba($primary-blue, 0.15);
    }
  }

  &.border-left-primary {
    border-left: 4px solid $primary-blue;
    background: linear-gradient(
      to right,
      white,
      white,
      rgba($primary-blue, 0.02)
    );
  }

  &.border-left-warning {
    border-left: 4px solid $primary-yellow;
    background: linear-gradient(
      to right,
      white,
      white,
      rgba($primary-yellow, 0.02)
    );
  }

  .card-body {
    padding: 1.5rem;

    @include respond-to(small) {
      padding: 1rem;
    }
  }
}

.stats-label {
  color: $gray;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 5px;
  font-weight: 500;

  @include respond-to(small) {
    font-size: 0.75rem;
  }
}

.stats-value {
  font-size: 1.8rem;
  font-weight: 700;
  color: $dark;
  margin-bottom: 5px;
  line-height: 1.2;

  @include respond-to(mobile) {
    font-size: 1.5rem;
  }

  @include respond-to(small) {
    font-size: 1.25rem;
  }
}

.stats-icon {
  font-size: 2.5rem;
  color: rgba($primary-blue, 0.1);
  transition: $transition-base;
}

// ----------------------------------------------------------------------------
// Tendances
// ----------------------------------------------------------------------------
.trend-up {
  color: $success;
  font-weight: 500;
}

.trend-down {
  color: $danger;
  font-weight: 500;
}

// ----------------------------------------------------------------------------
// Cartes de graphiques
// ----------------------------------------------------------------------------
.chart-card {
  @include card-base;
  height: 100%;

  &:hover {
    box-shadow: $box-shadow-md;
    border-color: rgba($primary-blue, 0.05);
  }

  .card-header {
    background: white;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    padding: 1rem 1.5rem;
    border-radius: $border-radius-md $border-radius-md 0 0 !important;

    h5 {
      color: $dark;
      font-weight: 600;
      font-size: 1rem;
      margin: 0;
      display: flex;
      align-items: center;

      i {
        font-size: 1.1rem;
      }
    }

    @include respond-to(small) {
      padding: 0.875rem 1rem;
    }
  }

  .card-body {
    padding: 1.5rem;
    min-height: 200px;
    @include flex-center;

    @include respond-to(mobile) {
      padding: 1rem;
    }

    @include respond-to(small) {
      padding: 1rem;
    }
  }
}

// ----------------------------------------------------------------------------
// Canvas
// ----------------------------------------------------------------------------
canvas {
  max-width: 100%;
  height: auto !important;
}

// ----------------------------------------------------------------------------
// Tableau des écritures
// ----------------------------------------------------------------------------
.table-card {
  @include card-base;
  overflow: hidden;

  .card-header {
    background: white;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    padding: 1rem 1.5rem;

    h5 {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    @include respond-to(small) {
      padding: 0.875rem 1rem;
    }
  }

  .btn-outline-primary {
    color: $primary-blue;
    border-color: $primary-blue;
    padding: 0.375rem 1rem;
    font-weight: 500;

    &:hover {
      background: $primary-blue;
      color: white;
      transform: translateY(-1px);
      box-shadow: $box-shadow-hover;
    }
  }
}

// ----------------------------------------------------------------------------
// Style du tableau comptable
// ----------------------------------------------------------------------------
.accounting-table {
  margin-bottom: 0;
  width: 100%;

  thead {
    th {
      background: $light;
      color: $dark;
      font-weight: 600;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 1rem;
      border-bottom: 2px solid rgba($primary-blue, 0.1);
      white-space: nowrap;

      @include respond-to(small) {
        padding: 0.75rem;
        font-size: 0.75rem;
      }
    }
  }

  tbody {
    td {
      padding: 1rem;
      vertical-align: middle;
      color: $dark;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);

      @include respond-to(small) {
        padding: 0.75rem;
        font-size: 0.85rem;
      }
    }

    tr {
      &:hover {
        background-color: rgba($primary-blue, 0.02);
      }

      &:last-child td {
        border-bottom: none;
      }

      &.text-success td {
        color: $success !important;
      }

      &.text-danger td {
        color: $danger !important;
      }
    }
  }

  // Colonnes des montants
  td {
    &:nth-child(6),
    &:nth-child(7) {
      font-weight: 600;
      text-align: right;
    }
  }

  td.debit {
    color: $success;
    font-weight: 600;
  }

  td.credit {
    color: $danger;
    font-weight: 600;
  }
}

// ----------------------------------------------------------------------------
// Badges et marqueurs
// ----------------------------------------------------------------------------
.badge-journal {
  padding: 5px 10px;
  border-radius: $border-radius-lg;
  font-weight: 500;
  font-size: 0.8rem;
  display: inline-block;
  text-align: center;
  min-width: 60px;

  @include respond-to(small) {
    padding: 3px 8px;
    font-size: 0.7rem;
    min-width: 50px;
  }
}

.badge-amount {
  &.credit {
    color: $danger;
    font-weight: 600;
  }

  &.debit {
    color: $success;
    font-weight: 600;
  }
}

// ----------------------------------------------------------------------------
// Activités comptables
// ----------------------------------------------------------------------------
.activity-item {
  display: flex;
  align-items: start;
  padding: 15px 0;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  transition: $transition-fast;

  &:hover {
    background-color: rgba($primary-blue, 0.02);
    padding-left: 10px;
    padding-right: 10px;
    margin: 0 -10px;
    border-radius: $border-radius-sm;

    .activity-icon {
      transform: scale(1.1);
    }
  }

  &:last-child {
    border-bottom: none;
  }

  @include respond-to(small) {
    padding: 12px 0;
  }
}

.activity-icon {
  width: 40px;
  height: 40px;
  border-radius: $border-radius-sm;
  @include flex-center;
  margin-right: 15px;
  color: white;
  flex-shrink: 0;
  transition: $transition-base;

  &.bg-primary {
    background: $primary-blue;
    box-shadow: 0 4px 8px rgba($primary-blue, 0.3);
  }

  &.bg-warning {
    background: $primary-yellow;
    color: $dark;
    box-shadow: 0 4px 8px rgba($primary-yellow, 0.3);
  }

  &.bg-success {
    background: $success;
    box-shadow: 0 4px 8px rgba($success, 0.3);
  }

  &.bg-info {
    background: $info;
    box-shadow: 0 4px 8px rgba($info, 0.3);
  }
}

.activity-content {
  flex: 1;

  h6 {
    margin-bottom: 3px;
    color: $dark;
    font-weight: 600;
    font-size: 0.95rem;

    @include respond-to(small) {
      font-size: 0.9rem;
    }
  }

  p {
    font-size: 0.9rem;
    margin-bottom: 5px;
    color: $gray;

    @include respond-to(small) {
      font-size: 0.8rem;
    }
  }
}

.activity-meta {
  font-size: 0.8rem;
  color: $gray;
  display: flex;
  align-items: center;
  gap: 4px;

  i {
    font-size: 0.75rem;
  }

  @include respond-to(small) {
    font-size: 0.7rem;
  }
}

// ----------------------------------------------------------------------------
// Cartes génériques
// ----------------------------------------------------------------------------
.card {
  @include card-base;
  animation: slideIn 0.5s ease-out;
}

.card-header {
  background: white;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  padding: 1rem 1.5rem;
  border-radius: $border-radius-md $border-radius-md 0 0 !important;

  h5 {
    display: flex;
    align-items: center;
    gap: 8px;
    color: $dark;
    font-weight: 600;
    font-size: 1rem;
    margin: 0;
  }
}

.card-body {
  padding: 1.5rem;

  @include respond-to(small) {
    padding: 1rem;
  }
}

// ----------------------------------------------------------------------------
// Barres de progression
// ----------------------------------------------------------------------------
.progress {
  height: 8px;
  border-radius: 4px;
  background-color: rgba(0, 0, 0, 0.05);
  overflow: hidden;
}

.progress-bar {
  @include gradient-primary;
  border-radius: 4px;
  transition: width 0.6s ease;

  &.bg-success {
    @include gradient-success;
  }

  &.bg-warning {
    @include gradient-warning;
  }

  &.bg-info {
    @include gradient-info;
  }

  &.bg-primary {
    @include gradient-primary;
  }
}

// ----------------------------------------------------------------------------
// Textes et utilitaires
// ----------------------------------------------------------------------------
.text-muted {
  color: $gray !important;
  font-size: 0.95rem;
}

// ----------------------------------------------------------------------------
// Media Queries supplémentaires
// ----------------------------------------------------------------------------

// Mobile large (768px)
@include respond-to(mobile) {
  .stats-value {
    font-size: 1.5rem;
  }

  .chart-card .card-body {
    padding: 1rem;
  }

  .activity-item {
    padding: 12px 0;
  }
}

// Petit mobile (576px)
@include respond-to(small) {
  .stats-value {
    font-size: 1.25rem;
  }

  .stats-label {
    font-size: 0.75rem;
  }

  .card-header {
    padding: 0.875rem 1rem;
  }

  .card-body {
    padding: 1rem;
  }
}

// ----------------------------------------------------------------------------
// Styles d'impression
// ----------------------------------------------------------------------------
@include respond-to(print) {
  #page-content-wrapper {
    background: white;
  }

  .card {
    break-inside: avoid;
    box-shadow: none;
    border: 1px solid #ddd;
  }

  .filter-btn,
  .btn-outline-primary {
    display: none;
  }
}

// ----------------------------------------------------------------------------
// Classes utilitaires supplémentaires
// ----------------------------------------------------------------------------
.hover-lift {
  @include hover-lift;
}

.flex-between {
  @include flex-between;
}

.gradient-primary {
  @include gradient-primary;
}

.text-primary-custom {
  color: $primary-blue;
}

.bg-primary-custom {
  background-color: $primary-blue;
}

.border-left-primary-custom {
  border-left: 4px solid $primary-blue;
}

.border-left-warning-custom {
  border-left: 4px solid $primary-yellow;
}
